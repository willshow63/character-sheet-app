{
  "version": 3,
  "sources": ["../package.json", "../src/service_worker.js"],
  "sourcesContent": ["{\r\n  \"name\": \"character-sheet-app\",\r\n  \"version\": \"4.5.4\",\r\n  \"description\": \"Online character sheet for Tabletop Role-Playing Games\",\r\n  \"repository\": {\r\n    \"type\": \"git\",\r\n    \"url\": \"git+https://github.com/derikb/character-sheet-app.git\"\r\n  },\r\n  \"bugs\": {\r\n    \"url\": \"https://github.com/derikb/character-sheet-app/issues\"\r\n  },\r\n  \"homepage\": \"https://github.com/derikb/character-sheet-app#readme\",\r\n  \"keywords\": [\r\n    \"d&d\",\r\n    \"rpg\",\r\n    \"ttrpg\",\r\n    \"character sheet\"\r\n  ],\r\n  \"author\": \"Derik A Badman\",\r\n  \"license\": \"GPL-3.0\",\r\n  \"dependencies\": {\r\n    \"firebase\": \"^11.4.0\",\r\n    \"rpg-table-randomizer\": \"^1.5.0\"\r\n  },\r\n  \"devDependencies\": {\r\n    \"@stylistic/eslint-plugin-js\": \"^4.2.0\",\r\n    \"commit-and-tag-version\": \"^12.5.0\",\r\n    \"esbuild\": \"^0.25\",\r\n    \"eslint\": \"^9.22.0\",\r\n    \"globals\": \"^16.0.0\",\r\n    \"normalize.css\": \"^8.0.1\"\r\n  },\r\n  \"scripts\": {\r\n    \"test\": \"echo \\\"Error: no test specified\\\" && exit 1\",\r\n    \"start\": \"esbuild --serve=8080 --servedir=./dist ./src/styles.css ./src/index.js ./src/service_worker.js --outdir=./dist --loader:.svg=dataurl --loader:.html=file --bundle\",\r\n    \"build\": \"esbuild ./src/styles.css ./src/index.js ./src/service_worker.js --outdir=./dist --loader:.svg=dataurl --loader:.html=file --minify --sourcemap --bundle\",\r\n    \"release\": \"commit-and-tag-version -a\",\r\n    \"eslint\": \"eslint ./src\"\r\n  },\r\n  \"commit-and-tag-version\": {\r\n    \"scripts\": {\r\n      \"postbump\": \"npm run build && git add ./dist/service_worker.js ./dist/service_worker.js.map ./dist/index.js ./dist/index.js.map ./dist/styles.css ./dist/styles.css.map\"\r\n    },\r\n    \"bumpFiles\": [\r\n      \"package.json\",\r\n      \"package-lock.json\"\r\n    ]\r\n  }\r\n}\r\n", "/**\r\n * Service worker for character sheet app\r\n */\r\nimport { version } from '../package.json';\r\n/**\r\n * Config data\r\n * Update cacheName when we want to make sure to get new data in the cache\r\n * Caching all the files we use except the service worker itself\r\n */\r\nconst config = {\r\n    cacheName: version,\r\n    staticCacheItems: [\r\n        '/index.html',\r\n        '/index.js',\r\n        '/styles.css',\r\n        '/'\r\n    ]\r\n};\r\n\r\n/**\r\n * Event: install\r\n * precaches all the files we use in the app\r\n */\r\nself.addEventListener('install', (e) => {\r\n    function onInstall () {\r\n        return caches.open(config.cacheName)\r\n            .then(cache => cache.addAll(config.staticCacheItems));\r\n    }\r\n    e.waitUntil(\r\n        onInstall(e)\r\n            .then(() => self.skipWaiting())\r\n    );\r\n});\r\n/**\r\n * Event: activate\r\n * This clears out any old caches\r\n */\r\nself.addEventListener('activate', function (event) {\r\n    const cacheWhitelist = [config.cacheName];\r\n\r\n    event.waitUntil(\r\n        caches.keys().then(function (cacheNames) {\r\n            return Promise.all(\r\n                cacheNames.map(function (cacheName) {\r\n                    if (cacheWhitelist.indexOf(cacheName) === -1) {\r\n                        return caches.delete(cacheName);\r\n                    }\r\n                    return undefined;\r\n                })\r\n            );\r\n        })\r\n            .then(() => self.clients.claim())\r\n    );\r\n});\r\n/**\r\n * Event: fetch\r\n * Just fetches from the cache if it can, since the whole app is static\r\n * @param {FetchEvent} event\r\n */\r\nself.addEventListener('fetch', (event) => {\r\n    // Ignore POSTs (mostly to external DBs, etc.)\r\n    if (event.request.method === 'POST') {\r\n        fetch(event.request);\r\n        return;\r\n    }\r\n    event.respondWith(\r\n        caches.match(event.request)\r\n            .then(function (resp) {\r\n                return resp || fetch(event.request)\r\n                    .then(function (response) {\r\n                        return caches.open(config.cacheName)\r\n                            .then(function (cache) {\r\n                                cache.put(event.request, response.clone());\r\n                                return response;\r\n                            });\r\n                    });\r\n            }).catch(function (e) {\r\n                console.log('Service worker fetch failed.');\r\n            })\r\n    );\r\n});\r\n"],
  "mappings": "MAEE,IAAAA,EAAW,QCOb,IAAMC,EAAS,CACX,UAAWC,EACX,iBAAkB,CACd,cACA,YACA,cACA,GACJ,CACJ,EAMA,KAAK,iBAAiB,UAAY,GAAM,CACpC,SAASC,GAAa,CAClB,OAAO,OAAO,KAAKF,EAAO,SAAS,EAC9B,KAAKG,GAASA,EAAM,OAAOH,EAAO,gBAAgB,CAAC,CAC5D,CACA,EAAE,UACEE,EAAU,CAAC,EACN,KAAK,IAAM,KAAK,YAAY,CAAC,CACtC,CACJ,CAAC,EAKD,KAAK,iBAAiB,WAAY,SAAUE,EAAO,CAC/C,IAAMC,EAAiB,CAACL,EAAO,SAAS,EAExCI,EAAM,UACF,OAAO,KAAK,EAAE,KAAK,SAAUE,EAAY,CACrC,OAAO,QAAQ,IACXA,EAAW,IAAI,SAAUC,EAAW,CAChC,GAAIF,EAAe,QAAQE,CAAS,IAAM,GACtC,OAAO,OAAO,OAAOA,CAAS,CAGtC,CAAC,CACL,CACJ,CAAC,EACI,KAAK,IAAM,KAAK,QAAQ,MAAM,CAAC,CACxC,CACJ,CAAC,EAMD,KAAK,iBAAiB,QAAUH,GAAU,CAEtC,GAAIA,EAAM,QAAQ,SAAW,OAAQ,CACjC,MAAMA,EAAM,OAAO,EACnB,MACJ,CACAA,EAAM,YACF,OAAO,MAAMA,EAAM,OAAO,EACrB,KAAK,SAAUI,EAAM,CAClB,OAAOA,GAAQ,MAAMJ,EAAM,OAAO,EAC7B,KAAK,SAAUK,EAAU,CACtB,OAAO,OAAO,KAAKT,EAAO,SAAS,EAC9B,KAAK,SAAUG,EAAO,CACnB,OAAAA,EAAM,IAAIC,EAAM,QAASK,EAAS,MAAM,CAAC,EAClCA,CACX,CAAC,CACT,CAAC,CACT,CAAC,EAAE,MAAM,SAAUC,EAAG,CAClB,QAAQ,IAAI,8BAA8B,CAC9C,CAAC,CACT,CACJ,CAAC",
  "names": ["version", "config", "version", "onInstall", "cache", "event", "cacheWhitelist", "cacheNames", "cacheName", "resp", "response", "e"]
}
